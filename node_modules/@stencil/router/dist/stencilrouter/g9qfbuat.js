/*! Built with http://stenciljs.com */
const{h:t}=window.stencilrouter;var e="/",r="./",n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function s(t){return t.replace(/([=!:$/()])/g,"\\$1")}function a(t){return t&&t.sensitive?"":"i"}function c(t,o,u){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,o):Array.isArray(t)?function(t,e,r){for(var n=[],i=0;i<t.length;i++)n.push(c(t[i],e,r).source);return new RegExp("(?:"+n.join("|")+")",a(r))}(t,o,u):function(t,c,o){return function(t,n,s){for(var c=(s=s||{}).strict,o=!1!==s.end,u=i(s.delimiter||e),h=s.delimiters||r,l=[].concat(s.endsWith||[]).map(i).concat("$").join("|"),p="",g=!1,m=0;m<t.length;m++){var d=t[m];if("string"==typeof d)p+=i(d),g=m===t.length-1&&h.indexOf(d[d.length-1])>-1;else{var f=i(d.prefix),x=d.repeat?"(?:"+d.pattern+")(?:"+f+"(?:"+d.pattern+"))*":d.pattern;n&&n.push(d),d.optional?d.partial?p+=f+"("+x+")?":p+="(?:"+f+"("+x+"))?":p+=f+"("+x+")"}}return o?(c||(p+="(?:"+u+")?"),p+="$"===l?"$":"(?="+l+")"):(c||(p+="(?:"+u+"(?="+l+"))?"),g||(p+="(?="+u+"|"+l+")")),new RegExp("^"+p,a(s))}(function(t,a){for(var c,o=[],u=0,h=0,l="",p=a&&a.delimiter||e,g=a&&a.delimiters||r,m=!1;null!==(c=n.exec(t));){var d=c[0],f=c[1],x=c.index;if(l+=t.slice(h,x),h=x+d.length,f)l+=f[1],m=!0;else{var v="",y=t[h],b=c[2],R=c[3],S=c[4],k=c[5];if(!m&&l.length){var $=l.length-1;g.indexOf(l[$])>-1&&(v=l[$],l=l.slice(0,$))}l&&(o.push(l),l="",m=!1);var j=""!==v&&void 0!==y&&y!==v,w="+"===k||"*"===k,A="?"===k||"*"===k,M=v||p,O=R||S;o.push({name:b||u++,prefix:v,delimiter:M,optional:A,repeat:w,partial:j,pattern:O?s(O):"[^"+i(M)+"]+?"})}}return(l||h<t.length)&&o.push(l+t.substr(h)),o}(t,o),c,o)}(t,o,u)}const o={},u=1e4;let h=0;function l(t,e={}){"string"==typeof e&&(e={path:e});const{path:r="/",exact:n=!1,strict:i=!1}=e,{re:s,keys:a}=function(t,e){const r=`${e.end}${e.strict}`,n=o[r]||(o[r]={}),i=JSON.stringify(t);if(n[i])return n[i];const s=[],a={re:c(t,s,e),keys:s};return h<u&&(n[i]=a,h+=1),a}(r,{end:n,strict:i}),l=s.exec(t);if(!l)return null;const[p,...g]=l,m=t===p;return n&&!m?null:{path:r,url:"/"===r&&""===p?"/":p,isExact:m,params:a.reduce((t,e,r)=>(t[e.name]=g[r],t),{})}}class p{constructor(){this.unsubscribe=(()=>{}),this.componentProps={},this.exact=!1,this.group=null,this.groupIndex=null,this.routeRender=null,this.match=null}computeMatch(t){return t||(t=this.activeRouter.get("location").pathname),l(t,{path:this.url,exact:this.exact,strict:!0})}componentWillLoad(){this.unsubscribe=this.activeRouter.subscribe(t=>(this.match=t?null:this.computeMatch(),this.match),this.group,this.groupIndex),this.group||(this.match=this.computeMatch())}componentDidUnload(){this.unsubscribe()}render(){if(!this.activeRouter||!this.match)return null;const e=Object.assign({},this.componentProps,{history:this.activeRouter.get("history"),match:this.match});if(this.routeRender)return this.routeRender(Object.assign({},e,{component:this.component}));if(this.component){const r=this.component;return t(r,Object.assign({},e))}}static get is(){return"stencil-route"}static get properties(){return{activeRouter:{context:"activeRouter"},component:{type:String,attr:"component"},componentProps:{type:"Any",attr:"component-props"},exact:{type:Boolean,attr:"exact"},group:{type:String,attr:"group"},groupIndex:{type:Number,attr:"group-index"},location:{context:"location"},match:{state:!0},routeRender:{type:"Any",attr:"route-render"},url:{type:"Any",attr:"url"}}}}class g{constructor(){this.unsubscribe=(()=>{}),this.activeClass="link-active",this.exact=!1,this.custom="a",this.match=null}computeMatch(t){return t||(t=this.activeRouter.get("location").pathname),l(t,{path:this.urlMatch||this.url,exact:this.exact,strict:!0})}componentWillLoad(){this.unsubscribe=this.activeRouter.subscribe(()=>{this.match=this.computeMatch()}),this.match=this.computeMatch()}componentDidUnload(){this.unsubscribe()}handleClick(t){if(t.preventDefault(),this.activeRouter)return this.activeRouter.get("history").push(this.getUrl(this.url),{});console.warn('<stencil-route-link> wasn\'t passed an instance of the router as the "router" prop!')}getUrl(t){const e=this.activeRouter.get("root")||"/";return"/"==t.charAt(0)&&"/"==e.charAt(e.length-1)?e.slice(0,e.length-1)+t:e+t}render(){let e={class:{[this.activeClass]:null!==this.match},onClick:this.handleClick.bind(this)};return"a"===this.custom&&(e=Object.assign({},e,{href:this.url,title:this.anchorTitle,role:this.anchorRole,tabindex:this.anchorTabIndex})),t(this.custom,Object.assign({},e),t("slot",null))}static get is(){return"stencil-route-link"}static get properties(){return{activeClass:{type:String,attr:"active-class"},activeRouter:{context:"activeRouter"},anchorRole:{type:String,attr:"anchor-role"},anchorTabIndex:{type:String,attr:"anchor-tab-index"},anchorTitle:{type:String,attr:"anchor-title"},custom:{type:String,attr:"custom"},exact:{type:Boolean,attr:"exact"},match:{state:!0},url:{type:String,attr:"url"},urlMatch:{type:"Any",attr:"url-match"}}}}export{p as StencilRoute,g as StencilRouteLink};